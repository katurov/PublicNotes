# Как следует писать пользовательские истории?
© 1 августа 2008, Рон Джеффрис

Как говорил мой старый друг Чарльз Бэр, это вопрос из двух частей: «Как?» и «Следует ли писать пользовательские истории?» Ответ на второй вопрос: «Не совсем».

## Что такое пользовательская история?

Пользовательская история — это часть функциональности системы, понятная заказчику или владельцу продукта, представляющая приращение бизнес-ценности и реализуемая командой. Это не документ с требованиями и не письменное сообщение между тем, кто задаёт требования, и тем, кто их выполняет. Пользовательская история — это просто «задача, которую нужно выполнить».

## Как создаётся пользовательская история?

В принципе, история может быть придумана любым способом — заказчик просто «выдумывает» её. Однако есть важные принципы, которые стоит учитывать.
Формула «Как [роль], я хочу [действие], чтобы [цель]» напоминает, что нужно учитывать всех пользователей продукта, их цели и превращать их в нужные функции. Это полезно для создателя требований и важно для передачи разработчикам, чтобы они лучше поняли задачу.

Принцип INVEST напоминает, что истории должны быть независимыми (Independent), обсуждаемыми (Negotiable), ценными (Valuable), оцениваемыми (Estimatable), маленькими (Small) и тестируемыми (Testable). Эти аспекты важны при определении требований.

Эти идеи ценны, когда мы придумываем истории, и их стоит донести до всей команды.

## Как передаётся пользовательская история?

Главная идея: история передаётся команде через разговор. Это не письменный документ с последующими вопросами и ответами, а явный диалог между владельцем продукта и разработчиками.

Идеально, разговор завершается чётким определением критериев приёмки, отвечающих на вопрос: «Как вы узнаете, что мы сделали то, что вы просили?» Ответ, в лучшем случае, — это один или несколько исполняемых тестов, которые, когда они проходят, показывают, что история завершена.

## Как отслеживать пользовательскую историю?

История проходит через несколько состояний: от идеи в голове владельца продукта до желания её реализовать, планирования, включения в итерацию, кодирования, тестирования и, наконец, признания завершённой. Важно не потерять историю и знать, в каком она состоянии, особенно на последних этапах. Как это можно организовать?

Отличный способ — создать карточку, представляющую историю, и разместить её на настенной доске, показывающей текущее состояние. Джим Шор в одной из своих статей приводит пример такой доски с карточками.

Карточки на доске просты, публичны, легко обновляются, способствуют вовлечённости и ясно передают информацию. На карточке может быть написано, например, «Оплата сверхурочных», даже если изначальная идея была: «Как менеджер почасовых сотрудников, я хочу, чтобы они получали сверхурочные в соответствии с законом и нашей политикой, чтобы они были справедливо вознаграждены, а нас считали честной и дружелюбной компанией». Всё это обсуждалось в разговоре. На карточке достаточно написать лишь то, что напомнит, о чём шла речь.

**И помните: карточка подкреплена исполняемым тестом, который, вероятно, находится под контролем версий в репозитории.**

Некоторые команды хотят большего, например, базу данных с описаниями историй или передачу историй на расстоянии. Лично я бы сопротивлялся этому, но бывают случаи, когда это оправдано. Однако это уже другой, более тяжёлый формат пользовательских историй. Карточка — просто маркер, показывающий прогресс. Более тяжёлый формат становится архивным документом, частью формального представления проекта. Это допустимо, хотя по стандартам Agile может быть избыточным.

## Формально написанная история — это опция!

По стандартам Agile превращение истории в документ — это опция, а не обязательная часть. Если мы это делаем, нужно писать минимум, достаточный для текущей задачи, например, чтобы сообщить удалённым участникам команды, что происходит. Для некоторых команд — их мало, я уверен — есть потребности в архивации или передаче на расстоянии, требующие большего. Это можно делать, но только с неохотой.

## Итог

Пользовательская история — это понятный пользователю кусочек требований, который команда собирается реализовать. Лучший способ сообщить команде, что нужно, — поговорить с ней. Лучший способ убедиться в общем понимании — определить тест. Документ может служить подкреплением или детализацией разговора, но он не должен нести основную нагрузку — это задача разговора и подтверждения.

Формула «Как [роль], я хочу [действие], чтобы [цель]» и принцип INVEST важны при обдумывании нужных историй и могут быть полезны при их передаче команде. Это не значит, что их нужно обязательно записывать в таком формате, но и не запрещает это делать, если хочется. Мы вправе так поступать, но это не обязательно.

Таким образом, пользовательская история — это задача, которую нужно выполнить, эффективно передать и протестировать. Карточка или запись в инструменте могут быть письменными, но письмо — не самое важное. Оно, вероятно, наименее важно по сравнению с обдумыванием, коммуникацией и тестированием.
